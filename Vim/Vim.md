









[删除空行](http://stackoverflow.com/questions/706076/vim-delete-blank-lines)
1 /joe/e                              ;: 设置光标到匹配"joe"的末尾
2 /joe/e+1                            ;: 设置光标到匹配"joe"的末尾再后移一位
3 /joe/s-2                            ;: 设置光标到匹配"joe“的开头再前移两位
4 /joe/+3                             ;: 搜索“joe” 找到后将光标下移3行
5 /^joe.*fred.*bill/                  ;: 匹配以'j'开头且"joe"到"fred"到"bill"之间至少有一个字符
6 /^[A-J]\+/                          ;: 搜索行首非'A'到’J‘重复一次以上的行
7 /begin\_.*end                       ;: 多行匹配
8 /fred\_s*joe/i                      ;: 多行搜索可以是任何空白字符包括\n,\t等等
9 /fred\|joe                          ;: 搜索fred或者joe
10 /.*fred\&.*joe                      ;: 搜索同时包括fred跟joe的行
11 /\/i                         ;: 搜索独立的单词fred
12 /\<\d\d\d\d\>                       ;: 搜索独立的4位数字
13 /\D\d\d\d\d\D                       ;: 搜索恰好4位的数字
14 /\<\d\{4}\>                         ;: 同/\<\d\d\d\d\>
15 /\([^0-9]\|^\)%.*%                  ;: 查找以非0~9数字或在行首的%%所包括的内容 
16 ;:" 查找空行
17 /^\n\{3}                            ;: 匹配三连续的空行
18 ;:" 使用正则表达式组查找
19 /\(fred\).*\(joe\).*\2.*\1
20 ;:" 正则表达式重复
21 /^\([^,]*,\)\{8}
22 ;:" visual 下搜索 
23 :vmap // y/"               ;: visually模式下的键盘映射，把//映射成匹配当前选中的文本
24 :vmap // y/=escape(@",'\\/.*$^~[]')          ;: 包括空白字符
25 ;:" \zs 和 \ze 匹配原 :h /\zs
26 /<\zs[^>]*\ze>                      ;: 匹配<与>所包含的内容
27 ;:" 零宽度匹配 :h /\@=
28 /<\@<=[^>]*>\@=                     ;: 查找<与>所包含的内容
29 /<\@<=\_[^>]*>\@=                   ;: 多行匹配<与>所包含的内容
30 ;:" 多行查找 \_ 的意思是包括换行符
31 /                     ;: 匹配<与>所包含的所有内容
32 /fred\_s*joe/i                      ;: 匹配fred开始到joe之间一定得是空白字符
33 /bugs\(\_.\)*bunny                  ;: 匹配所有bugs到bunny的字符串
34 :h \_                               ;: help
35 ;:" 查找函数声明，nmap为normal模式下的键盘映射
36 :nmap gx yiw/^\(sub\function\)\s\+"
37 ;:" 查找多个文件
38 :bufdo /searchstr/                  ;: 在多个文件缓冲区里执行查找
39 ;:" 更好的多文件查找定位方法
40 :bufdo %s/searchstr/&/gic           ;: 在多个文件缓冲区里查找，按下n停止
41 ;:" 怎样不使用 / 来查找网址
42 ?http://www.vim.org/                ;: 向后查找
43 ;:" 查找指定字符以外的字符串
44 /\c\v([^aeiou]&\a){4}               ;: 查找4个辅音字母
45 ;:-----------------------------------------------------------------------------
46 ;:#替换
47 :%s/fred/joe/igc                    ;: 普通替换命令
48 :%s/\r//g                           ;: 删除 DOS 的换行符 ^M
49 ;:" 你的文本文件是否乱七八糟的排成一行？使用如下命令
50 :%s/\r/\r/g                         ;: 转换 DOS 回车符 ^M 为真正的回车符
51 :%s= *$==                           ;: 删除行尾空白
52 :%s= \+$==                          ;: 同上
53 :%s#\s*\r\?$##                      ;: 删除尾部空白和dos换行符
54 :%s#\s*\r*$##                       ;: 同上
55 ;:" 删除空行
56 :%s/^\n\{3}//                       ;: 删除连续3个空行
57 :%s/^\n\+/\r/                       ;: 压缩空行，多个替换为一个
58 :%s#<[^>]\+>##g                      ;: 删除html的tag部分
59 :%s#<\_.\{-1,}>##g                  ;: 多行删除 html 的tags (非贪婪方式)
60 ;:" IF YOU ONLY WANT TO KNOW ONE THING
61 :'a,'bg/fred/s/dick/joe/igc         ;: 非常有用 
62                                     ;# 译释：''a,''b指定一个范围：mark a ~ mark b
63                                     ;# g//用一个正则表达式指出了进行操作的行必须可以被fred匹配
64                                     ;# 看后面，g//是一个全局显示命令
65                                     ;# s/dick/joe/igc则对于这些满足条件的行进行替换
66 ;:" 复制列
67 :%s= [^ ]\+$=&&=                    ;: 复制最后一列
68 :%s= \f\+$=&&=                      ;: 复制最后一列
69 :%s= \S\+$=&&                       ;: 复制最后一列
70 ;:" 记忆（反向引用）
71 :s/\(.*\):\(.*\)/\2: \1/            ;: 将两个字段颠倒
72 :%s/^\(.*\)\n\1$/\1/                ;: 删除重复行
73 ;:" 非贪婪匹配 \{-}
74 :%s/^.\{-}pdf/new.pdf/              ;: 删除第一个pdf
75 ;:" use of optional atom \?
76 :%s#\<[zy]\?tbl_[a-z_]\+\>#\L&#gc   ;: lowercase with optional leading characters
77 ;:" 跨越尽量多的行
78 :%s///                ;: 删除多行注释
79 :help /\{-}                         ;: 查看非贪婪匹配的更多帮助
80 ;:" 使用寄存器替换
81 :s/fred/a/g                    ;: 将fred替换为寄存器a里的内容 #为按下Ctrl与r
82 :s/fred/asome_texts/g
83 :s/fred/\=@a/g                      ;: 比较好的办法，不显示替换内容 
84 ;:" 在一行里写多种命令
85 :%s/\f\+\.gif\>/\r&\r/g | v/\.gif$/d| %s/gif/jpg/
86 :%s/a/but/gie|:update|:next         ;: 当使用 @: 来重复
87 ;:" 或运算
88 :%s/suck\|buck/loopy/gc             ;: 替换suck或者buck（这里|不是管道）
89 ;:" 调用vim函数
90 :s/__date__/\=strftime("%c")/       ;: 将__date__替换成当前日期，使用strftime函数
91 ;:" 处理列，替换所有在第三列中的str1
92 :%s:\(\(\w\+\s\+\)\{2}\)str1:\1str2:
93 ;:" 交换第一列跟第四列
94 :%s:\(\w\+\)\(.*\s\+\)\(\w\+\)$:\3\2\1:
95 ;:" 过滤form中的内容放在寄存器里
96 :redir @*|sil exec 'g#<\(input\|select\|textarea\|/\=form\)\>#p'|redir END
97 :nmap ,z :redir @*sil exec 'g@<\(input\select\textarea\/\=form\)\>@p'redir END
98 ;:" 两位以上的数字减三（带进位。这个命令挺有趣）
99 :%s/\d\+/\=(submatch(0)-3)/
100 ;:" 包含loc或者functions的行中的数字加6
101 :g/loc\|function/s/\d/\=submatch(0)+6/
102 ;:" 比上面更好的方法
103 :%s#txtdev\zs\d#\=submatch(0)+1#g
104 :h /\zs                            ;查看帮助
105 ;:" 前缀为gg的数字加6
106 :%s/\(gg\)\@<=\d\+/\=submatch(0)+6/
107 :h zero-width                      ;查看帮助
108 ;:" 替换一个特定字符串为数字
109 :let i=10 | 'a,'bg/Abc/s/yy/\=i/ |let i=i+1 ;# 将yy转换成10，11，12等等
110 ;:" 比上面的更精确
111 :let i=10 | 'a,'bg/Abc/s/xx\zsyy\ze/\=i/ |let i=i+1 # 将xxyy 转换成 xx11,xx12,xx13
112 ;:" 将查找内容放入内存，然后用\zs进行简单替换 
113 :%s/"\([^.]\+\).*\zsxx/\1/
114 ;:" 将xx替换为此行内容 
115 :nmap z :%s#\<=expand("")\>#
116 ;:" 将Vis选中的内容用<>括起来 
117 :vmap z :%s/\<*\>/
118 ;:-----------------------------------------------------------------------------
119 ;:" 下面举一些在替换中使用替换的例子 
120 ;:" 多种分符可以被用在替换中 
121 :%s,\(all/.*\)\@<=/,_,g             ;: 用 _ 替换 "all/"之后的 /  
122 ;:" 同样的功能 
123 :s#all/\zs.*#\=substitute(submatch(0), '/', '_', 'g')#
124 :s#all/#&^M#|s#/#_#g|-j!            ;" 查找断行，并合并为一行
125 ;:" 在替换命令中使用替换 
126 :%s/.*/\='cp '.submatch(0).' all/'.substitute(submatch(0),'/','_','g')/
127 ;:-----------------------------------------------------------------------------
128 ;:" 全局显示命令 
129 :g/gladiolli/#                      ;: 查找并显示匹配的行号
130 :g/fred.*joe.*dick/                 ;: 显示所有含有 fred,joe & dick的行
131 :g/\/                        ;: 显示单一单词fred
132 :g/^\s*$/d                          ;: 删除所有空行
133 :g!/^dd/d                           ;: 删除不含字符串''dd''的行
134 :v/^dd/d                            ;: 同上
135 :g/fred/,/joe/d                     ;: 删除所有的从fred到joe
136 :g/-------/.-10,.d                  ;: 以-------为标记删除之前的10行
137 :g/{/ ,/}/- s/\n\+/\r/g             ;: 删除 {...}之间的空行
138 :v/\S/d                             ;: 删除空行 
139 :v/./,/./-j                         ;: 压缩空行
140 :g/^$/,/./-j                        ;: 同上
141 :g/142 :g/^/put_                           ;: 双倍行宽 (pu = put)
143 :g/^/m0                             ;: 颠倒文件 (m = move)
144 :'a,'bg/^/m'b                       ;: 颠倒选中的 a 到 b
145 :g/^/t.                             ;: 重复行
146 :g/fred/t$                          ;: 拷贝行从fred到结尾
147 :g/stage/t'a                        ;: 拷贝行从stage 到 marker a（a为标记的位置）
148 :g/\(^I[^^I]*\)\{80}/d              ;: 删除最少包含80个tab的行
149 ;:" 隔行替换 
150 :g/^/ if line('.')%2|s/^/zz /
151 ;:" 查找标记a与b 间所有包含 "somestr" 
152 ;:" 复制所有"otherstr"后的行 
153 :'a,'bg/somestr/co/otherstr/        ;: co(py) or mo(ve)
154 :'a,'bg/str1/s/str1/&&&/|mo/str2/   ;" 范围同上，进行替换
155 :%norm jdd                          ;: 隔行删除
156 ;:" 增加数字 (键入 )            ;#在MS-Windows中已经被定义为全选
157 :.,$g/^\d/exe "norm! \"        ;: 增加从当前行首到结尾的数字
158 :'a,'bg/\d\+/norm! ^A               ;: 增加数字
159 ;:" 保存全局命令的结果 (注意必须使用添加模式) 你需要使用 qaq 清空寄存器a. 
160 ;:"save results to a register/paste buffer 存储结果到 寄存器/粘贴 到 a
161 :g/fred/y A                         ;: 添加配备行到寄存器到 a
162 :g/fred/y A | :let @*=@a            ;: 放入复制缓冲区
163 :let @a=''|g/Barratt/y A |:let @*=@a
164 :'a,'b g/^Error/ . w >> errors.txt  ;" 将查找内容放入一个文件 (文件必须存在)
165 ;:" 复制每一行，然后在复制出来的每一行两侧加上一个 print '复制出来的内容'
166 :g/./yank|put|-1s/'/"/g|s/.*/Print '&'/
167 ;:" 用文件中的内容替换字符串，-d 表示删除“标记”
168 :g/^MARK$/r tmp.ex | -d
169 ;:" 精致的显示方法 
170 :g//z#.5                   ;: 带行号显示  
171 :g//z#.5|echo "==========" ;: 漂亮的显示  
172 ;:" 用 g// 执行正常命令
173 :g/|/norm 2f|r*                     ;: 替换第二个|为* 
174 ;:" 在新窗口中显示查找结果
175 :nmap :redir @a:g//:redir END:new:put! a
176 ;:-----------------------------------------------------------------------------
177 ;:" 全局命令和替换命令联姻 (强大的编辑能力)
178 :'a,'bg/fred/s/joe/susan/gic        ;: 可以使用反向引用来匹配
179 :g/fred/,/joe/s/fred/joe/gic        ;: 非行模式 
180 ;:-----------------------------------------------------------------------------
181 ;:" 先找fred，然后找joe
182 :/fred/;/joe/-2,/sid/+3s/sally/alley/gIC
183 ;:-----------------------------------------------------------------------------
184 ;:" create a new file for each line offile eg 1.txt,2.txt,3,txt etc
185 ;:" 将每一行的内容存成一个文件，文件名为 行号.txt  如 1.txt,2.txt 等
186 :g/^/exe ".w ".line(".").".txt"
187 ;:-----------------------------------------------------------------------------
188 ;:" 绝对精华 
189 ;:-----------------------------------------------------------------------------
190 * # g* g#                           ;: 查找当前光标下的单词（单个单词） () (向前/向后)
191 %                                   ;: 匹配括号 {}[]()
192 .                                   ;: 重复上次操作 
193 @:                                  ;: 重复上次的命令
194 matchit.vim                         ;: 适%能匹配
